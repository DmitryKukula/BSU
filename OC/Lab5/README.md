# Управление доступом к файлу через именованные каналы

## Задача

Разработать программу для управления доступом параллельных процессов к файлу с использованием именованных каналов.

### Процесс-сервер (Server)

1. Создает бинарный файл, записи которого имеют структуру:

```cpp
struct employee
{
    int num;          // идентификационный номер сотрудника
    char name[10];    // имя сотрудника
    double hours;     // количество отработанных часов
};
```

   Имя файла и данные о сотрудниках вводятся с консоли.

2. Выводит созданный файл на консоль.

3. Запускает процессы-клиенты (`Client`), которые выполняют доступ к файлу через именованные каналы. Количество процессов клиентов вводится с консоли.

4. Обслуживает запросы процессов-клиентов следующим образом:
   - Если процесс-клиент запрашивает модификацию записи файла, то доступ к этой записи блокируется для других процессов-клиентов до завершения модификации записи клиентом.
   - Если процесс-клиент запрашивает чтение записи файла, то доступ к этой записи для других процессов-клиентов:
     - Не блокируется, если они также запрашивают доступ на чтение данных.
     - Блокируется, если они запрашивают доступ на запись данных.

5. После завершения работы всех процессов-клиентов выводит на консоль модифицированный файл.

6. По команде с консоли завершает свою работу.

### Процесс-клиент (Client)

1. Выполняет цикл:
   1. Запрашивает с консоли выполнение одной из операций:
      - Модификация записи файла;
      - Чтение записи;
      - Выход из цикла.

   2. После ввода требуемых данных выполняет эту операцию.

2. Доступ к записям файла осуществляется по ключу, который является ID сотрудника.

3. При модификации записи процесс-клиент выполняет следующие действия:
   1. Запрашивает ключ записи.
   2. Посылает запрос на сервер.
   3. Выводит полученную с сервера запись на консоль.
   4. Запрашивает новые значения полей.
   5. По команде с консоли посылает измененную запись на сервер.
   6. По команде с консоли завершает доступ к записи.

4. При чтении записи процесс-клиент выполняет следующие действия:
   1. Запрашивает ключ записи.
   2. Посылает запрос на сервер.
   3. Выводит полученную с сервера запись на консоль.
   4. По команде с консоли завершает доступ к записи.

## Упрощенный вариант

Решить поставленную задачу для одного процесса `Server` и одного процесса `Client`.
